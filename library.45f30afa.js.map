{"mappings":"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","sources":["src/js/library_main.js","src/js/library_fetch.js"],"sourcesContent":["import { fetchLibrary } from './library_fetch';\nimport { paginationPlace } from './pagination';\nimport { gallery } from './cards_rendering';\nimport './open_modal';\nimport './add_to_queue';\nimport './add_to_watched';\nimport './scroll_up_button';\n\n// DOM elements\nconst myLibraryButton = document.querySelector(\n  '.navigation__item:nth-child(2)'\n);\nconst watchedListButton = document.querySelector('[loadWatched]');\nconst queueListButton = document.querySelector('[loadQueued]');\n\n// Local storage\nlet watchedMovies = [JSON.parse(localStorage.getItem('movies-watched'))];\nlet queuedMovies = [JSON.parse(localStorage.getItem('movies-queued'))];\n\ngallery.innerHTML = '';\npaginationPlace.innerHTML = '';\n\nsetTimeout(() => {\n  loadLibrary();\n  loadWatchedList();\n}, 500);\n\nexport function loadLibrary() {\n  gallery.innerHTML = '';\n  paginationPlace.innerHTML = '';\n  loadWatchedList();\n}\n\nasync function loadWatchedList() {\n  // button's visual changes\n  watchedListButton.classList.add('button--active');\n  watchedListButton.classList.remove('button--inactive');\n  paginationPlace.innerHTML = '';\n  queueListButton.classList.add('button--inactive');\n  queueListButton.classList.remove('button--active');\n\n  // change showed movies\n\n  if (watchedMovies[0] === null || watchedMovies[0].length === 0) {\n    paginationPlace.innerHTML = '';\n    gallery.innerHTML = `<h2 class=\"warning\">You don't have any watched movies yet!</h2>`;\n    return;\n  } else {\n    paginationPlace.innerHTML = '';\n\n    fetchLibrary(watchedMovies[0]);\n  }\n}\nasync function loadQueueList() {\n  // button's visual changes\n  queueListButton.classList.add('button--active');\n  queueListButton.classList.remove('button--inactive');\n\n  watchedListButton.classList.add('button--inactive');\n  watchedListButton.classList.remove('button--active');\n\n  // change showed movies\n  gallery.innerHTML = '';\n  if (queuedMovies[0] === null || queuedMovies[0].length === 0) {\n    gallery.innerHTML = `<h2 class=\"warning\">You don't have any queued movies yet!</h2>`;\n  } else {\n    fetchLibrary(queuedMovies[0]);\n  }\n}\nmyLibraryButton.addEventListener('click', loadLibrary);\n\nwatchedListButton.addEventListener('click', loadWatchedList);\nqueueListButton.addEventListener('click', loadQueueList);\n","import { renderMovies } from './cards_rendering';\nconst api_key = `bf9c4d58b7779ca7f547438ec065a7d2`;\nconst api_url = `https://api.themoviedb.org/3/movie/`;\nimport { paginationPlace } from './pagination';\n\nexport async function fetchLibrary(ids) {\n  let watchedMoviesURL = [];\n  // finding movie\n  for (const movieId of ids) {\n    watchedMoviesURL.push(api_url + `${movieId.id}?api_key=${api_key}`);\n  }\n\n  const movies = [];\n  let genresArray = [];\n\n  for (const movie of watchedMoviesURL) {\n    let res = await (await fetch(movie)).json();\n    let genres = res[`genres`];\n    let newGenreArray = [];\n    newGenreArray.push(...genres);\n    genresArray = [...genresArray, ...newGenreArray];\n    let genresIds = [];\n    for (const genre of genres) {\n      genresIds.push(genre.id);\n    }\n    res['genre_ids'] = genresIds;\n    movies.push(res);\n  }\n  renderMovies(0, movies, genresArray);\n  paginationPlace.innerHTML = '';\n}\n"],"names":["$bpxeT","parcelRequire","$6fda4c5e0fd12b40$var$api_key","$6fda4c5e0fd12b40$var$api_url","$6fda4c5e0fd12b40$export$3da1c33d77833b0c","ids","$6fda4c5e0fd12b40$var$_fetchLibrary","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","watchedMoviesURL","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","movieId","movies","genresArray","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","movie","_newGenreArray","res","genres","newGenreArray","genresIds","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","genre","undefined","Symbol","iterator","next","done","value","push","concat","id","_ctx","t0","return","fetch","sent","json","$8nrFW","t1","t2","$iGUyU","renderMovies","$jcFG7","paginationPlace","innerHTML","$54cdf0dc33f0c8bb$var$myLibraryButton","document","querySelector","$54cdf0dc33f0c8bb$var$watchedListButton","$54cdf0dc33f0c8bb$var$queueListButton","$54cdf0dc33f0c8bb$var$watchedMovies","JSON","parse","localStorage","getItem","$54cdf0dc33f0c8bb$var$queuedMovies","$54cdf0dc33f0c8bb$export$826c32731ceb1c03","gallery","$54cdf0dc33f0c8bb$var$loadWatchedList","$54cdf0dc33f0c8bb$var$_loadWatchedList","classList","add","remove","length","$54cdf0dc33f0c8bb$var$_loadQueueList","setTimeout","addEventListener"],"version":3,"file":"library.45f30afa.js.map"}